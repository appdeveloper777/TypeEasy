// Ejemplo de conexi칩n y consulta ORM a MySQL usando TypeEasy
// Archivo: orm_mysql.te

class Usuario {
  id : int;
  usuario : string;
  email : string;

  __constructor(id : int, usuario : string, email : string) {
    this.id = id;
    this.usuario = usuario;
    this.email = email;
  }
}

endpoint {
  [HttpGet("/api/mysql-orm/local-xampp-server/usuarios")]
  GetUsuariosORM() {
     // Conexi칩n a MySQL de XAMPP en la m치quina host (Windows)
     // host.docker.internal:3308 - puerto de XAMPP
    string _host = "host.docker.internal";
    string _user = "root";
    string _pass = "";
    string _db   = "meri";
    int _port = 3308;
    let _conn_id = new mysql_connect(_host, _user, _pass, _db, _port);

    // ORM: consulta y mapeo a objetos
    string _query = "SELECT * FROM users LIMIT 3";
    let _usuarios = orm_query(_conn_id, _query, Usuario);

    // Cerrar conexi칩n
    mysql_close(_conn_id);

    // Retornar lista de usuarios como XML
    return xml(_usuarios);
  }
}


